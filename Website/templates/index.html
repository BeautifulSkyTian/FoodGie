<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>🍔 FoodGie - Gemini Vision</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
  <div class="container">
    <header>
      <h1>🍔 FooGie</h1>
      <p class="subtitle">Analyze calories and freshness with AI</p>
    </header>

    <main>
      <div class="card">
        <form id="analyze-form" enctype="multipart/form-data">
          
          <!-- File Upload Section -->
          <div class="input-group">
            <label class="label">
              <span class="label-icon">📁</span>
              Upload an image
            </label>
            <div class="file-input-wrapper">
              <input type="file" name="image_file" id="image_file" accept="image/*" class="file-input" />
              <label for="image_file" class="file-input-label">
                <span class="file-input-text">Choose file...</span>
              </label>
            </div>
          </div>

          <div class="divider">
            <span>OR</span>
          </div>

          <!-- URL Input Section -->
          <div class="input-group">
            <label class="label">
              <span class="label-icon">🔗</span>
              Enter an image URL
            </label>
            <input 
              type="text" 
              name="image_url" 
              placeholder="https://example.com/food-image.jpg" 
              class="text-input"
            />
          </div>

          <div class="divider">
            <span>OR</span>
          </div>

          <!-- Camera Section -->
          <div class="input-group">
            <label class="label">
              <span class="label-icon">📸</span>
              Take a photo
            </label>
            <div id="camera-container">
              <div class="camera-preview">
                <video id="video" autoplay playsinline muted class="hidden"></video>
                <img id="preview" alt="Captured photo" class="hidden" />
              </div>
              <div class="camera-controls">
                <button type="button" id="start-camera" class="btn btn-secondary">
                  <span>📷</span> Start Camera
                </button>
                <button type="button" id="capture" class="btn btn-secondary hidden">
                  <span>📸</span> Capture Photo
                </button>
                <button type="button" id="retake" class="btn btn-secondary hidden">
                  <span>🔄</span> Retake Photo
                </button>
              </div>
            </div>
          </div>

          <!-- Submit Button -->
          <button type="submit" class="btn btn-primary">
            <span>✨</span> Analyze Food
          </button>
        </form>

        <!-- Results Section -->
        <div id="result" class="result"></div>
      </div>
    </main>

    <footer>
      <p>Powered by Gemini 2.0 Flash</p>
    </footer>
  </div>

  <script src="{{ url_for('static', filename='js/camera.js') }}"></script>
  <script src="{{ url_for('static', filename='js/analyzer.js') }}"></script>
</body>
</html>
